# Программа для перевода субтитров с английского на русский

## Описание

Данная программа предназначена для автоматического перевода файлов субтитров с английского языка на русский с использованием внешней утилиты `trans`. Программа находит все файлы с суффиксом `_en.srt` в указанной директории, переводит их и сохраняет результат в новых файлах с суффиксом `_ru.srt`.

Основные возможности:
- Рекурсивный поиск файлов с суффиксом `_en.srt` в директории.
- Перевод каждого файла построчно, за исключением строк, содержащих номера субтитров и метки времени.
- Переименование исходных файлов после перевода (добавляется символ подчеркивания к имени файла).

## Установка

Для работы программы необходима утилита [trans](https://github.com/soimort/translate-shell), которая используется для перевода текста. Чтобы установить `trans`, выполните команду:

```bash
sudo apt-get install translate-shell
```

## Использование

1. Склонируйте репозиторий с программой:

```bash
git clone https://github.com/ваш-репозиторий
```

2. Перейдите в директорию с программой:

```bash
cd путь-к-директории
```

3. Соберите программу:

```bash
gcc -o subtitle_translator main.c
```

4. Запустите программу, указав путь к директории с файлами для перевода:

```bash
./subtitle_translator /путь/к/директории
```

Если путь не указан, программа будет работать с текущей директорией.

## Пример работы

Предположим, что в директории `/home/user/subtitles` находятся файлы субтитров с именами `movie_en.srt` и `show_en.srt`. После запуска программы:

```bash
./subtitle_translator /home/user/subtitles
```

Будут созданы переведённые файлы: `movie_ru.srt` и `show_ru.srt`. Исходные файлы будут переименованы в `movie_en.srt_` и `show_en.srt_`.

## Структура программы

- **main.c** — основной файл программы, содержащий функции для поиска файлов, перевода и переименования.

### Основные функции

- `save_files_in_array` — рекурсивно сохраняет имена файлов с суффиксом `_en.srt` в массив.
- `translate_and_write` — переводит содержимое файла с помощью утилиты `trans` и сохраняет результат в новом файле.
- `add_underscore_to_filename` — добавляет символ подчеркивания к исходному имени файла.
- `replaceSubstring` — заменяет суффикс `_en.srt` на `_ru.srt` для сохранения переведённого файла.

## Ошибки и их обработка

Программа обрабатывает следующие типы ошибок:
- Ошибки открытия директории или файлов.
- Ошибки при выделении памяти.
- Ошибки выполнения внешней команды `trans`.

При возникновении ошибки программа завершает работу с выводом соответствующего сообщения.

## Лицензия

Данный проект распространяется под лицензией MIT. См. файл [LICENSE](LICENSE) для получения подробной информации.
